<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Etch-a-Sketch</title>
</head>
<body>
    <button id="input-btn">Choose Your Grid!</button>
    <div id="container"></div>
    
    <script>
        const userInput = document.querySelector("#input-btn");
        const container = document.querySelector("#container");

        let gridSizeDefault = 16;
        let hoveredSquareQty = 0;

        function createGrid(gridSize) {
            for (let i = 0; i < (gridSize * gridSize); i++) {
                const gridSquare = document.createElement("div");
                gridSquare.classList.add("square"); // For CSS and nodeList
                gridSquare.style.height = (875 / gridSize) + "px"; // Went this route because setAttribute DID NOT WORK
                gridSquare.style.width = (875 / gridSize) + "px"; // Formula auto adjusts square sizes so grid is gridSize x gridSize in given space
                container.appendChild(gridSquare);
            }

            const colorSquares = document.querySelectorAll(".square");
        
            colorSquares.forEach((colorSquare) => {
                colorSquare.addEventListener("mouseover", () => {
                    hoveredSquareQty++;

                    if (hoveredSquareQty > 10) {  // Used two if statements so both always run. Once Qty > 10, counter restarts.
                        hoveredSquareQty = 1;
                    }

                    if (hoveredSquareQty <= 10) {
                        colorSquare.style.opacity = hoveredSquareQty * 0.1; // Returns opacity value between .1 and 1 before resetting so a fully colored square is achieved in ten mouseovers.
                    }

                    colorSquare.style.backgroundColor = "rgb(23, 165, 105)";
                });
            });            
        }

        createGrid(gridSizeDefault);

        userInput.addEventListener("click", () => {
            let gridSizeUser = prompt("Enter number squares per side.");
            
            if (gridSizeUser <= 100) {
                const removeSquares = document.querySelectorAll(".square");

                removeSquares.forEach((removeSquare) => {
                    container.removeChild(removeSquare);
                });

                createGrid(gridSizeUser);
            }

            else {
                alert("Please enter a number less than or equal to 100.");
            }
            
        });
    </script>
</body>
</html>